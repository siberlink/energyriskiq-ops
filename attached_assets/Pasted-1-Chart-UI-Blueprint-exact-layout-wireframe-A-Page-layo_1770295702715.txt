1) Chart UI Blueprint â€” exact layout wireframe
A. Page layout (desktop)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header: GERI Dashboard  |  Plan badge | Date (last update) | Export | Help  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CONTROL BAR                                                                  â”‚
â”‚ [Range: 7D 30D 90D 1Y Since Launch Custom]  [Compare: Off | vs prev period]  â”‚
â”‚ [Mode: Overlay | Divergence | Correlation | Storage Context]                 â”‚
â”‚ [Normalize: Off | Indexed(100) | Z-score] [Smoothing: Raw 3D 7D]             â”‚
â”‚ [Assets: Brent â˜  TTF â˜  VIX â˜  EURUSD â˜  EU Storage â˜ ] (max N by plan)     â”‚
â”‚ [Risk Bands: On/Off] [Event Markers: On/Off] [Annotations: On/Off]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MAIN CHART (70%)                                       â”‚ INTERPRETATION (30%)â”‚
â”‚                                                       â”‚                     â”‚
â”‚  â–‘ background shading by GERI bands                    â”‚  CURRENT STATE      â”‚
â”‚  â”€ GERI (left axis 0â€“100)                              â”‚  - Risk band + trendâ”‚
â”‚  â”€ Asset lines (right axis or normalized axis)         â”‚  - Confirmation scoreâ”‚
â”‚  âŠ™ regime shift markers (optional)                     â”‚  - Lead/Lag summary â”‚
â”‚  â‡µ hover tooltip (all series + derived metrics)        â”‚                     â”‚
â”‚                                                       â”‚  WHAT CHANGED        â”‚
â”‚                                                       â”‚  - Î”GERI, Î”Assets     â”‚
â”‚                                                       â”‚  - Drivers (if any)   â”‚
â”‚                                                       â”‚                     â”‚
â”‚                                                       â”‚  ACTIONABLE READ      â”‚
â”‚                                                       â”‚  - â€œWatch next 48hâ€   â”‚
â”‚                                                       â”‚  - â€œIf X then Yâ€      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SECONDARY PANELS (tabs)                                                      â”‚
â”‚ [Lag & Divergence] [Rolling Corr] [Response Strength] [EU Storage Seasonal]  â”‚
â”‚                                                                             â”‚
â”‚ Lag & Divergence tab example:                                               â”‚
â”‚  - Table: best lag, corr@lag, divergence score, status (confirm/decouple)   â”‚
â”‚  - Mini chart: Î”GERI vs shifted Î”Asset (best lag)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

B. Main chart modes (what the user sees)

Overlay (default)

GERI line + selected assets

Risk band shading ON by default

Divergence

Shows GERI vs expected asset move and flags â€œdecoupling zonesâ€

Correlation

Main chart stays, but lower panel shows rolling correlation

Storage Context (specialized)

EU Storage shown as percent + seasonal percentile, plus GERI

C. Tooltip spec (must-have)

On hover:

Date

GERI value + band

Each asset value (raw) + normalized value

Derived:

Î”GERI (1D / 7D)

Î”Asset (1D / 7D)

Best lag (per asset)

Divergence score (per asset)

Confirmation score (overall)

2) Statistical Logic Model â€” lag + divergence automatically

You have daily data, so keep it robust and explainable. Use returns/changes, not raw levels.

A. Preprocessing

For each asset series 
ğ‘ƒ
ğ‘¡
P
t
	â€‹

:

Use log returns for price-like assets:

ğ‘Ÿ
ğ‘¡
=
ln
â¡
(
ğ‘ƒ
ğ‘¡
)
âˆ’
ln
â¡
(
ğ‘ƒ
ğ‘¡
âˆ’
1
)
r
t
	â€‹

=ln(P
t
	â€‹

)âˆ’ln(P
tâˆ’1
	â€‹

)

For EU Gas Storage (level-like, bounded), use simple delta:

ğ‘Ÿ
ğ‘¡
=
ğ‘†
ğ‘¡
âˆ’
ğ‘†
ğ‘¡
âˆ’
1
r
t
	â€‹

=S
t
	â€‹

âˆ’S
tâˆ’1
	â€‹


For GERI 
ğº
ğ‘¡
G
t
	â€‹

 (0â€“100):

Use delta:

ğ‘”
ğ‘¡
=
ğº
ğ‘¡
âˆ’
ğº
ğ‘¡
âˆ’
1
g
t
	â€‹

=G
t
	â€‹

âˆ’G
tâˆ’1
	â€‹


Optional smoothing (user selectable):

3-day MA or 7-day MA on 
ğ‘”
ğ‘¡
g
t
	â€‹

 and 
ğ‘Ÿ
ğ‘¡
r
t
	â€‹

.

B. Lag detection (per asset)

Goal: find lag 
ğ¿
L where GERI changes best align with asset response.

Choose lag window, e.g.:

ğ¿
âˆˆ
[
âˆ’
14
,
+
14
]
Lâˆˆ[âˆ’14,+14] days
(negative = asset leads risk; positive = risk leads asset)

Compute correlation on changes:

ğœŒ
(
ğ¿
)
=
ğ‘
ğ‘œ
ğ‘Ÿ
ğ‘Ÿ
(
ğ‘”
ğ‘¡
,
ğ‘Ÿ
ğ‘¡
+
ğ¿
)
Ï(L)=corr(g
t
	â€‹

,r
t+L
	â€‹

)

Pick â€œbest lagâ€:

ğ¿
\*
=
ğ‘
ğ‘Ÿ
ğ‘”
ğ‘š
ğ‘
ğ‘¥
ğ¿
âˆ£
ğœŒ
(
ğ¿
)
âˆ£
L
\*
=argmax
L
	â€‹

âˆ£Ï(L)âˆ£

Store:

ğ¿
\*
L
\*
 and 
ğœŒ
\*
=
ğœŒ
(
ğ¿
\*
)
Ï
\*
=Ï(L
\*
)

Stability check (avoid noisy results):

Require 
âˆ£
ğœŒ
\*
âˆ£
â‰¥
ğœŒ
ğ‘š
ğ‘–
ğ‘›
âˆ£Ï
\*
âˆ£â‰¥Ï
min
	â€‹

 (e.g. 0.15â€“0.25 depending on your data)

Require enough samples in window (e.g. â‰¥ 120 days)

C. Expected-response model (simple, explainable)

Use a linear mapping from risk change to asset change, fitted on a rolling window 
ğ‘Š
W (e.g., 180 days), using best lag:

Fit:

ğ‘Ÿ
ğ‘¡
+
ğ¿
\*
â‰ˆ
ğ›¼
+
ğ›½
ğ‘”
ğ‘¡
r
t+L
\*
	â€‹

â‰ˆÎ±+Î²g
t
	â€‹


Estimate 
ğ›¼
,
ğ›½
Î±,Î² with robust regression (Huber) or ordinary least squares if you prefer simplicity.

D. Divergence score (per asset, per day)

Compute predicted return:

ğ‘Ÿ
^
ğ‘¡
+
ğ¿
\*
=
ğ›¼
+
ğ›½
ğ‘”
ğ‘¡
r
^
t+L
\*
	â€‹

=Î±+Î²g
t
	â€‹


Residual:

ğ‘’
ğ‘¡
+
ğ¿
\*
=
ğ‘Ÿ
ğ‘¡
+
ğ¿
\*
âˆ’
ğ‘Ÿ
^
ğ‘¡
+
ğ¿
\*
e
t+L
\*
	â€‹

=r
t+L
\*
	â€‹

âˆ’
r
^
t+L
\*
	â€‹


Normalize residual by rolling volatility:

ğœ
ğ‘’
=
ğ‘ 
ğ‘¡
ğ‘‘
(
ğ‘’
 over last 
ğ‘Š
)
Ïƒ
e
	â€‹

=std(e over last W)

Divergence Z:

ğ·
ğ‘¡
=
ğ‘’
ğ‘¡
/
ğœ
ğ‘’
D
t
	â€‹

=e
t
	â€‹

/Ïƒ
e
	â€‹


Interpretation:

âˆ£
ğ·
ğ‘¡
âˆ£
<
1
âˆ£D
t
	â€‹

âˆ£<1: normal alignment

1
â‰¤
âˆ£
ğ·
ğ‘¡
âˆ£
<
2
1â‰¤âˆ£D
t
	â€‹

âˆ£<2: mild divergence

âˆ£
ğ·
ğ‘¡
âˆ£
â‰¥
2
âˆ£D
t
	â€‹

âˆ£â‰¥2: strong divergence (flag zone)

E. Confirmation score (system-level)

Convert each assetâ€™s alignment into a 0â€“100 â€œconfirmationâ€ and combine:

Per asset:

alignment = 
1
âˆ’
ğ‘š
ğ‘–
ğ‘›
(
âˆ£
ğ·
ğ‘¡
âˆ£
/
3
,
1
)
1âˆ’min(âˆ£D
t
	â€‹

âˆ£/3,1) (clamps at 0 when |D|â‰¥3)

ğ¶
ğ‘
ğ‘ 
ğ‘ 
ğ‘’
ğ‘¡
=
100
âˆ—
ğ‘
ğ‘™
ğ‘–
ğ‘”
ğ‘›
ğ‘š
ğ‘’
ğ‘›
ğ‘¡
C
asset
	â€‹

=100âˆ—alignment

Weighting (suggested; tune later):

TTF: 0.30 (Europe energy stress)

Brent: 0.25 (global supply expectations)

VIX: 0.20 (macro spillover)

EUR/USD: 0.15 (Europe vulnerability)

EU Storage: 0.10 (buffer context)

Overall:

ğ¶
ğ‘¡
ğ‘œ
ğ‘¡
ğ‘
ğ‘™
=
âˆ‘
ğ‘¤
ğ‘–
ğ¶
ğ‘–
C
total
	â€‹

=âˆ‘w
i
	â€‹

C
i
	â€‹


F. Regime shift detection (simple)

Define:

Risk regime = band of 
ğº
ğ‘¡
G
t
	â€‹


Regime change marker if:

band changed or

âˆ£
ğ‘”
ğ‘¡
âˆ£
âˆ£g
t
	â€‹

âˆ£ exceeds threshold (e.g. â‰¥ 8 points/day)

Mark these dates on the chart as vertical markers.

3) User Interpretation Engine â€” analyst commentary templates

This is the â€œvoiceâ€ that makes your chart sell itself. Use deterministic templates with a few computed inputs:

Band, trend, momentum

Confirmation score

For each asset: best lag, divergence score, direction

A. â€œCurrent Stateâ€ template (always shown)

Template

Risk Level: {band} ({G_t}/100)

Trend: {trend_label} ({Î”7D} over 7D)

Market Confirmation: {C_total}/100 ({confirm_label})

Rules

confirm_label:

â‰¥70: â€œStrong cross-asset confirmationâ€

45â€“69: â€œMixed confirmationâ€

<45: â€œWeak confirmation / possible decouplingâ€

B. â€œLead/Lagâ€ template (per asset)

Template

{Asset}: historically responds {lead_lag_text} by {L*} days in the current regime (corr {Ï*}).

lead_lag_text

L* > 0: â€œafter risk movesâ€

L* = 0: â€œsame-day with riskâ€

L* < 0: â€œbefore risk movesâ€

C. â€œDivergenceâ€ template (per asset, conditional)

Trigger when 
âˆ£
ğ·
ğ‘¡
âˆ£
â‰¥
2
âˆ£D
t
	â€‹

âˆ£â‰¥2

Template

{Asset} divergence: risk implies a move of ~{pred_move}, but market printed {actual_move}.
Interpretation: {divergence_read}

divergence_read rules (examples)

If GERI rising but asset not reacting (Î² positive, predicted up, actual flat/down):

â€œMarket is discounting the risk signal or pricing a short-lived shock.â€

If asset spikes while GERI stable:

â€œLikely idiosyncratic driver (weather/infrastructure/liquidity) rather than systemic risk.â€

D. â€œSystemic vs containedâ€ template (big insight)

Use:

High GERI + high VIX alignment => systemic

High GERI + low VIX alignment => contained

High GERI + high TTF + low storage percentile => Europe stress

Template

System classification: {system_label}.
Why: {reason_1}; {reason_2}.
Watch next: {watch_item}.

system_label rules

â€œSystemic stressâ€: C_total â‰¥ 70 AND VIX aligned (|D|<1.5)

â€œSector-contained riskâ€: GERI high but VIX misaligned

â€œEurope gas stressâ€: TTF aligned + storage percentile low

â€œBuffered riskâ€: storage percentile high + TTF muted

E. â€œWhat changed since yesterdayâ€ (delta narrative)

Inputs: Î”GERI 1D, Î”Asset 1D, band change, divergence change.

Template

Since yesterday: GERI {up/down} {Î”GERI}.

Main market reaction: {top_asset} moved {Î”asset}.

Signal quality: {improved/worsened} (confirmation {Î”C_total}).

F. â€œActionable readâ€ (careful wording, not advice)

Template

Monitoring focus (next 24â€“48h): {asset_or_context}.

If risk continues {up/down}: expect {asset} to {likely_move} based on historical response (lag {L*}d).

If divergence persists: watch for {reversion_trigger}.

4) Data Normalization Algorithm Spec â€” overlay accuracy

Your goal: let users compare shapes without misleading them.

A. Standardize date alignment

Build a unified daily calendar from min(GERI_date, asset_date) to max.

Forward-fill only where appropriate:

For prices: do not forward-fill across missing market days unless you also mark them as non-trading days; better: keep gaps but display as stepped or missing.

For storage (weekly-ish): forward-fill is acceptable with a â€œstaleâ€ indicator (days since last update).

B. Normalization modes (user toggle)

Provide 3 modes:

1) Raw (no normalization)

Show GERI on left axis (0â€“100)

Assets on right axis in their native units

Use when user wants actual levels.

2) Indexed to 100 (recommended default for multi-asset overlays)

Choose base date 
ğ‘¡
0
t
0
	â€‹

 = first visible date in selected range.
For asset price-like series:

ğ¼
ğ‘¡
=
100
âˆ—
(
ğ‘ƒ
ğ‘¡
/
ğ‘ƒ
ğ‘¡
0
)
I
t
	â€‹

=100âˆ—(P
t
	â€‹

/P
t
0
	â€‹

	â€‹

)

For storage:

Option A (indexed): 
ğ¼
ğ‘¡
=
100
âˆ—
(
ğ‘†
ğ‘¡
/
ğ‘†
ğ‘¡
0
)
I
t
	â€‹

=100âˆ—(S
t
	â€‹

/S
t
0
	â€‹

	â€‹

)

Option B (percent-of-capacity): keep as 
ğ‘†
ğ‘¡
S
t
	â€‹

 (%) and instead use dual-axis + seasonal percentile line (often best)

For GERI:

Keep on 0â€“100 scale OR optionally index it too:

ğ¼
ğ‘¡
ğº
=
100
âˆ—
(
ğº
ğ‘¡
/
ğº
ğ‘¡
0
)
I
t
G
	â€‹

=100âˆ—(G
t
	â€‹

/G
t
0
	â€‹

	â€‹

)
But in most dashboards, GERI should remain 0â€“100 for interpretability.

3) Z-score (best for â€œis this move unusual?â€)

Compute within the visible window (or rolling window W):

ğ‘
ğ‘¡
=
(
ğ‘¥
ğ‘¡
âˆ’
ğœ‡
)
/
ğœ
Z
t
	â€‹

=(x
t
	â€‹

âˆ’Î¼)/Ïƒ

Use this for:

Divergence mode

Cross-asset â€œshockâ€ comparisons

C. Smoothing (visual + analytical)

Offer:

Raw

3-day MA

7-day MA

Spec:

MA applied after normalization in Indexed/Z mode (cleaner visuals)

For divergence calculations, smoothing should be applied consistently to both 
ğ‘”
ğ‘¡
g
t
	â€‹

 and 
ğ‘Ÿ
ğ‘¡
r
t
	â€‹

.

D. EU Storage seasonal context (special spec)

Storage is seasonal; the most â€œtruthfulâ€ overlay is:

Primary: storage level (%) line

Secondary: seasonal percentile or â€œvs seasonal averageâ€

percentile computed vs historical distribution for that week-of-year

If you donâ€™t have many years yet, use:

â€œvs recent baselineâ€ (e.g., last 2â€“3 years if available), or

show only â€œcurrent vs max/min since launchâ€ until history grows.

E. Handling outliers (avoid chart distortion)

Winsorize returns for assets in divergence computations:

clamp 
ğ‘Ÿ
ğ‘¡
r
t
	â€‹

 at 1st/99th percentile (rolling)

Donâ€™t clamp raw price charts (users may want spikes)

F. Consistency rules (prevents user confusion)

Same selected window applies to:

main chart

rolling corr

divergence panel

Tooltip always shows both:

raw value

normalized value (if enabled)